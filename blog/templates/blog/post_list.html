{% extends 'blog/base.html' %}
{% block title %}Blog{% endblock %}

{% block content %}

<h2>
  {% if current_category %}
    Posts in "{{ current_category.name }}"
  {% else %}
    All Blog Posts
  {% endif %}
</h2>

<div class="mb-3">
  <strong>Categories:</strong>
  {% for cat in categories %}
    <a href="{% url 'posts_by_category' cat.slug %}" class="badge bg-info text-dark me-1">
      {{ cat.name }}
    </a>
  {% endfor %}
</div>

<div class="row">
  {% for post in posts %}
    <div class="col-md-4 mb-3">
      <div class="card h-100">
        <div class="card-body">
          <h5>
            <a href="{% url 'post_detail' post.id %}">{{ post.title }}</a>
          </h5>
          <p>{{ post.content|truncatewords:20 }}</p>
        </div>
        <div class="card-footer text-muted">
          {{ post.author_name }} |
          <span class="badge bg-secondary">{{ post.category.name }}</span> |
          {{ post.created_at }}
        </div>
      </div>
    </div>
  {% empty %}
    <p>No posts found.</p>
  {% endfor %}
</div>

{% endblock %}
